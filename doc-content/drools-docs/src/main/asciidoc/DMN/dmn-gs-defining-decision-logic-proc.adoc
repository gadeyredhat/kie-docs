[id='dmn-gs-defining-decision-logic-proc']
= Defining the traffic violations DMN decision logic using decision table

To calculate the fine and to decide the context whether the driver be suspended, you will define the traffic violations DMN decision logic using decision tables.

.Prerequisite
* You have assigned the DMN custom data types to the appropriate decision and input nodes in the traffic violations DRD in {CENTRAL}.

.Procedure
. To calculate fine, in the DMN designer canvas, select the *Fine* decision node and click the *Edit* icon to open the DMN boxed expression designer.
. Click to open the *Select logic type* context menu and select *Decision Table* from it. A decision table based on *tFine* custom data type will open.
. Right-click the *Violation.Date* parameter input field and select *Delete Input Clause* from the context menu to delete the column from the table.
. Right-click the *Violation.Code* parameter input field and select *Delete Input Clause*.
. Right-click the *Violation.Speed Limit* parameter field and select *Delete Input Clause*.
. Next, click the *Violation.Actual Speed* column header and enter the expression `Violation.Actual Speed - Violation.Speed Limit` in the *Name* field.
. Right-click the *Fine* parameter field and select either `Insert Output Clause left` or `Insert Output Clause right`.
. Click the *output-2* column sub-header, enter `Amount` in the *Name* field and select `number` from the *Data Type* field.
. Similarly, click the *output-1* column sub-header, enter `Points` in the *Name* field and select `number` from the *Data Type* field.
. Next, enter the following values in the first row of the decision table:
* *Violation.Type*: `"speed"`
* *Violation.Actual Speed - Violation.Speed Limit*: `[10..30]`
* *Amount*: `500`
* *Points*: `3`
+
Right-click the first row and select `Insert rule below` to add another row.
. Enter the following values in the second row of the decision table:
* *Violation.Type*: `"speed"`
* *Violation.Actual Speed - Violation.Speed Limit*: `>= 30`
* *Amount*: `1000`
* *Points*: `7`
+
Right-click the second row and select `Insert rule below` to add another row.
. Enter the following values in the third row of the decision table:
* *Violation.Type*: `"parking"`
* *Violation.Actual Speed - Violation.Speed Limit*: `-`
* *Amount*: `100`
* *Points*: `1`
+
Right-click the third row and select `Insert rule below` to add another row.
. Enter the following values in the fourth row of the decision table:
* *Violation.Type*: `"driving under the influence"`
* *Violation.Actual Speed - Violation.Speed Limit*: `-`
* *Amount*: `1000`
* *Points*: `5`
+
Right-click the fourth row and select `Insert rule below` to add another row.
+
.Fine decision table
image::dmn/dmn-gs-fine-decision-table.png[alt]
. Click *Save* to open the *Confirm Save* dialog box and click *Save* again.

After defining the decision table for calculating fine, you need to define the context for whether the driver is to be suspended or not.

. In the DMN designer canvas, select the *Should the driver be suspended?* decision node and click the *Edit* icon to open the DMN boxed expression designer.
. Click to open the *Select logic type* context menu and select *Context* from it. A context table based on *Should the driver be suspended?* decision node will open.
. Click *ContextEntry-1*,
.. Enter `Total Points` as *Name* and select `number` as the *Data Type*.
.. Click the cell next to *Total Points* and select `Literal Expression` from the context menu.
.. Enter `Driver.Points + Fine.Points` as the *Literal Expression*.
.. In the parameter cell below *Driver.Points + Fine.Points*, enter `if Total Points >= 20 "Yes" else "No"`.
+
.Should the driver be suspended? context
image::dmn/dmn-gs-context-table.png[alt]
. Click *Save* to open the *Confirm Save* dialog box and click *Save* again.

You have defined how to calculate the fine and the context for deciding when to suspend the driver. You can now build your project and if it displays a *Build: SUCCESSFUL* message in the *Alerts* section, it confirms that you are correctly creating the project.
